## 记录一下折腾软路由入到坑。

### 本地环境和网络架构
运营商开通了动态公网IP。入户光猫是桥接模式。直连软路由，期待软路由做一些科学上网，DDNS，签到等工作。然后直连一个交换机（H3C的一个8口千兆交换机），把信号分到各个屋里，其中一根线走到无线路由器供家中无线设备连接。无线路由器是小米的AX3600，原生固件，设置成有线中继模式，也叫AP模式，只负责用来发射WiFi信号。
大概得网络拓扑类似这个图，网上找的图。
![277e30a1-f3d5-4279-a227-f76563afc0be](https://github.com/codechenz/Openwrt/assets/15170922/dcc106e2-daa1-4bac-9bb2-5d088883c57b)
光猫：天邑TEWA-600AGM
软路由：J1900的一个小机器
交换机：H3C 8口千兆
无线路由器：小米AX3600

### 选择软路由系统

首先是选择固件，市面上多数的都是基于Openwrt再开发的系统，因为自己比较小白，也不太想过于折腾，选择了iStoreOS这个固件作为软路由的系统。这个系统是国内一家公司做的，比较适合新手小白，很多设置都是自动生成的，也有一些三方软件可以安装，当然了必不可少的科学上网软件，都是支持的，我用的是OpenClash。还有其他好几种热门，可以满足大多数人的需求。

### 准备工作
选定了固件之后，就是去下载固件，当前更新的都是比较快的，一个月都能有好几个新版本。我的硬件是Intel的J1900，我用最新版（22.03.5-2023082509）的安装系统的时候总是遇到一些问题。后来改用了（21.02.3, 2022092414）就可以安装成功了。如果你也遇到类似的问题，可以选择一个旧一些的版本先安装上，之后再通过iStoreOS自己的在线升级固件，应该也可以。旧版本的系统大体的功能也都在，如果新版本没有你恰好想要的功能，旧版也是可以用的。下载连接的话 https://www.koolcenter.com/fw?firmware=iStoreOS&tag=default&version=default&arch=default&brand=default&alia=default 根据你CPU的架构选择相应的固件，我选择的是X86_64，至于有无EFI这个，较新的机型都是支持EFI的，这个我理解是一种启动方式。

